<Window x:Class="Cmux.Views.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Settings" Height="600" Width="700"
        WindowStyle="None" AllowsTransparency="True"
        Background="Transparent"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize">

    <Window.Resources>
        <!-- Force dark system brush overrides inside settings window -->
        <SolidColorBrush x:Key="{x:Static SystemColors.WindowBrushKey}" Color="#FF1A1A1A" />
        <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" Color="#FF1A1A1A" />
        <SolidColorBrush x:Key="{x:Static SystemColors.WindowTextBrushKey}" Color="#FFE2E2E9" />
        <SolidColorBrush x:Key="{x:Static SystemColors.ControlTextBrushKey}" Color="#FFE2E2E9" />
        <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="#FF252547" />
        <SolidColorBrush x:Key="{x:Static SystemColors.HighlightTextBrushKey}" Color="#FFE2E2E9" />

        <!-- Nav button style -->
        <Style x:Key="NavButton" TargetType="Button">
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="Foreground" Value="{StaticResource ForegroundDimBrush}" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="HorizontalContentAlignment" Value="Left" />
            <Setter Property="Padding" Value="14,10" />
            <Setter Property="FontSize" Value="13" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="Bd" Background="{TemplateBinding Background}"
                                CornerRadius="5" Margin="4,1" Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                              VerticalAlignment="Center" />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Bd" Property="Background" Value="#20FFFFFF" />
                            </Trigger>
                            <Trigger Property="Tag" Value="active">
                                <Setter Property="Foreground" Value="{StaticResource ForegroundBrush}" />
                                <Setter TargetName="Bd" Property="Background" Value="#30FFFFFF" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Settings text input style -->
        <Style x:Key="SettingsTextBox" TargetType="TextBox">
            <Setter Property="Background" Value="#FF1A1A1A" />
            <Setter Property="Foreground" Value="{StaticResource ForegroundBrush}" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="BorderBrush" Value="{StaticResource BorderBrush}" />
            <Setter Property="Padding" Value="8,6" />
            <Setter Property="FontSize" Value="13" />
            <Setter Property="CaretBrush" Value="{StaticResource ForegroundBrush}" />
        </Style>

        <Style x:Key="SettingsPasswordBox" TargetType="PasswordBox">
            <Setter Property="Background" Value="#FF1A1A1A" />
            <Setter Property="Foreground" Value="{StaticResource ForegroundBrush}" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="BorderBrush" Value="{StaticResource BorderBrush}" />
            <Setter Property="Padding" Value="8,6" />
            <Setter Property="FontSize" Value="13" />
            <Setter Property="CaretBrush" Value="{StaticResource ForegroundBrush}" />
        </Style>

        <Style x:Key="SettingsComboItem" TargetType="ComboBoxItem">
            <Setter Property="Background" Value="#FF1A1A1A" />
            <Setter Property="Foreground" Value="{StaticResource ForegroundBrush}" />
            <Setter Property="Padding" Value="6,4" />
            <Style.Triggers>
                <Trigger Property="IsHighlighted" Value="True">
                    <Setter Property="Background" Value="#FF252547" />
                    <Setter Property="Foreground" Value="{StaticResource ForegroundBrush}" />
                </Trigger>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="#FF1E1E32" />
                    <Setter Property="Foreground" Value="{StaticResource ForegroundBrush}" />
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Settings combo style -->
        <Style x:Key="SettingsCombo" TargetType="ComboBox">
            <Style.Resources>
                <SolidColorBrush x:Key="{x:Static SystemColors.WindowBrushKey}" Color="#FF1A1A1A" />
                <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" Color="#FF1A1A1A" />
                <SolidColorBrush x:Key="{x:Static SystemColors.WindowTextBrushKey}" Color="#FFE2E2E9" />
                <SolidColorBrush x:Key="{x:Static SystemColors.ControlTextBrushKey}" Color="#FFE2E2E9" />
                <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="#FF252547" />
                <SolidColorBrush x:Key="{x:Static SystemColors.HighlightTextBrushKey}" Color="#FFE2E2E9" />
            </Style.Resources>
            <Setter Property="Background" Value="#FF1A1A1A" />
            <Setter Property="Foreground" Value="{StaticResource ForegroundBrush}" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="BorderBrush" Value="{StaticResource BorderBrush}" />
            <Setter Property="Padding" Value="8,6" />
            <Setter Property="FontSize" Value="13" />
            <Setter Property="HorizontalContentAlignment" Value="Left" />
            <Setter Property="VerticalContentAlignment" Value="Center" />
            <Setter Property="FocusVisualStyle" Value="{x:Null}" />
            <Setter Property="ItemContainerStyle" Value="{StaticResource SettingsComboItem}" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ComboBox">
                        <Grid>
                            <Border x:Name="Bd"
                                    Background="{TemplateBinding Background}"
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    BorderThickness="{TemplateBinding BorderThickness}"
                                    CornerRadius="4" />

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="28" />
                                </Grid.ColumnDefinitions>

                                <ContentPresenter x:Name="ContentSite"
                                                  Grid.Column="0"
                                                  Margin="8,0,4,0"
                                                  VerticalAlignment="Center"
                                                  HorizontalAlignment="Left"
                                                  Content="{TemplateBinding SelectionBoxItem}"
                                                  ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}"
                                                  ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}"
                                                  IsHitTestVisible="False" />

                                <TextBox x:Name="PART_EditableTextBox"
                                         Grid.Column="0"
                                         Margin="8,0,4,0"
                                         Background="Transparent"
                                         BorderThickness="0"
                                         Foreground="{TemplateBinding Foreground}"
                                         VerticalContentAlignment="Center"
                                         Visibility="Hidden" />

                                <Border Grid.Column="1" Background="#FF252547" CornerRadius="0,4,4,0" IsHitTestVisible="False">
                                    <TextBlock Text="&#xE70D;" FontFamily="Segoe MDL2 Assets"
                                               Foreground="{TemplateBinding Foreground}"
                                               HorizontalAlignment="Center" VerticalAlignment="Center"
                                               FontSize="10" />
                                </Border>

                                <ToggleButton Grid.ColumnSpan="2"
                                              Background="Transparent"
                                              BorderThickness="0"
                                              Focusable="False"
                                              ClickMode="Press"
                                              IsChecked="{Binding IsDropDownOpen, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}">
                                    <ToggleButton.Template>
                                        <ControlTemplate TargetType="ToggleButton">
                                            <Border Background="Transparent" />
                                        </ControlTemplate>
                                    </ToggleButton.Template>
                                </ToggleButton>
                            </Grid>

                            <Popup x:Name="PART_Popup"
                                   AllowsTransparency="True"
                                   IsOpen="{TemplateBinding IsDropDownOpen}"
                                   Placement="Bottom"
                                   PlacementTarget="{Binding RelativeSource={RelativeSource TemplatedParent}}"
                                   StaysOpen="False"
                                   Focusable="False"
                                   PopupAnimation="Slide">
                                <Border x:Name="DropDownBorder"
                                        Margin="0,2,0,0"
                                        Background="#FF1A1A1A"
                                        BorderBrush="{TemplateBinding BorderBrush}"
                                        BorderThickness="1"
                                        CornerRadius="6"
                                        MinWidth="{TemplateBinding ActualWidth}">
                                    <ScrollViewer Margin="2" SnapsToDevicePixels="True">
                                        <ItemsPresenter KeyboardNavigation.DirectionalNavigation="Contained" />
                                    </ScrollViewer>
                                </Border>
                            </Popup>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="HasItems" Value="False">
                                <Setter TargetName="DropDownBorder" Property="MinHeight" Value="40" />
                            </Trigger>
                            <Trigger Property="IsKeyboardFocusWithin" Value="True">
                                <Setter TargetName="Bd" Property="BorderBrush" Value="{StaticResource AccentBrush}" />
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Opacity" Value="0.5" />
                            </Trigger>
                            <Trigger Property="IsEditable" Value="True">
                                <Setter TargetName="PART_EditableTextBox" Property="Visibility" Value="Visible" />
                                <Setter TargetName="ContentSite" Property="Visibility" Value="Hidden" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Settings checkbox style -->
        <Style x:Key="SettingsCheck" TargetType="CheckBox">
            <Setter Property="Foreground" Value="{StaticResource ForegroundBrush}" />
            <Setter Property="FontSize" Value="13" />
            <Setter Property="VerticalContentAlignment" Value="Center" />
        </Style>

        <!-- Section label -->
        <Style x:Key="SectionLabel" TargetType="TextBlock">
            <Setter Property="Foreground" Value="{StaticResource ForegroundDimBrush}" />
            <Setter Property="VerticalAlignment" Value="Center" />
            <Setter Property="FontSize" Value="13" />
        </Style>

        <Style x:Key="SettingsListBox" TargetType="ListBox">
            <Setter Property="Background" Value="#FF1A1A1A" />
            <Setter Property="Foreground" Value="{StaticResource ForegroundBrush}" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="BorderBrush" Value="{StaticResource BorderBrush}" />
            <Setter Property="Padding" Value="2" />
        </Style>

        <Style x:Key="SettingsListBoxItem" TargetType="ListBoxItem">
            <Setter Property="Foreground" Value="{StaticResource ForegroundBrush}" />
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="Padding" Value="6,4" />
            <Style.Triggers>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="#FF252547" />
                </Trigger>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#331A1A2E" />
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <Border Background="{StaticResource BackgroundBrush}" CornerRadius="10" BorderThickness="1"
            BorderBrush="{StaticResource BorderBrush}">
        <Border.Effect>
            <DropShadowEffect BlurRadius="24" ShadowDepth="4" Opacity="0.6" Color="Black" />
        </Border.Effect>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="44" />
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <!-- Title Bar -->
            <Border Grid.Row="0" Background="Transparent" MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
                <Grid>
                    <TextBlock Text="Settings" FontSize="14" FontWeight="SemiBold"
                               Foreground="{StaticResource ForegroundBrush}"
                               VerticalAlignment="Center" Margin="18,0,0,0" />
                    <Button x:Name="CloseBtn" HorizontalAlignment="Right" VerticalAlignment="Center"
                            Margin="0,0,10,0" Click="CloseButton_Click"
                            Style="{StaticResource IconButton}" Content="&#xE8BB;"
                            FontFamily="Segoe MDL2 Assets" FontSize="12" />
                </Grid>
            </Border>

            <!-- Main Content -->
            <Grid Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="150" />
                    <ColumnDefinition Width="1" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <!-- Left Nav Sidebar -->
                <StackPanel Grid.Column="0" Margin="0,8,0,0">
                    <Button x:Name="NavAppearance" Style="{StaticResource NavButton}"
                            Click="NavButton_Click">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="&#xE790;" FontFamily="Segoe MDL2 Assets" FontSize="14"
                                       VerticalAlignment="Center" Margin="0,0,10,0" />
                            <TextBlock Text="Appearance" VerticalAlignment="Center" />
                        </StackPanel>
                    </Button>
                    <Button x:Name="NavTerminal" Style="{StaticResource NavButton}"
                            Click="NavButton_Click">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="&#xE756;" FontFamily="Segoe MDL2 Assets" FontSize="14"
                                       VerticalAlignment="Center" Margin="0,0,10,0" />
                            <TextBlock Text="Terminal" VerticalAlignment="Center" />
                        </StackPanel>
                    </Button>
                    <Button x:Name="NavBehavior" Style="{StaticResource NavButton}"
                            Click="NavButton_Click">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="&#xE713;" FontFamily="Segoe MDL2 Assets" FontSize="14"
                                       VerticalAlignment="Center" Margin="0,0,10,0" />
                            <TextBlock Text="Behavior" VerticalAlignment="Center" />
                        </StackPanel>
                    </Button>
                    <Button x:Name="NavKeyboard" Style="{StaticResource NavButton}"
                            Click="NavButton_Click">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="&#xE765;" FontFamily="Segoe MDL2 Assets" FontSize="14"
                                       VerticalAlignment="Center" Margin="0,0,10,0" />
                            <TextBlock Text="Keyboard" VerticalAlignment="Center" />
                        </StackPanel>
                    </Button>
                    <Button x:Name="NavAgent" Style="{StaticResource NavButton}"
                            Click="NavButton_Click">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="&#xE943;" FontFamily="Segoe MDL2 Assets" FontSize="14"
                                       VerticalAlignment="Center" Margin="0,0,10,0" />
                            <TextBlock Text="Agent" VerticalAlignment="Center" />
                        </StackPanel>
                    </Button>
                    <Button x:Name="NavAbout" Style="{StaticResource NavButton}"
                            Click="NavButton_Click">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="&#xE946;" FontFamily="Segoe MDL2 Assets" FontSize="14"
                                       VerticalAlignment="Center" Margin="0,0,10,0" />
                            <TextBlock Text="About" VerticalAlignment="Center" />
                        </StackPanel>
                    </Button>
                </StackPanel>

                <!-- Divider -->
                <Border Grid.Column="1" Background="{StaticResource BorderBrush}" />

                <!-- Content Area -->
                <ScrollViewer Grid.Column="2" VerticalScrollBarVisibility="Auto" Padding="24,16">
                    <Grid>

                    <!-- ═══ Appearance Section ═══ -->
                    <StackPanel x:Name="AppearanceSection">
                        <TextBlock Text="Appearance" FontSize="18" FontWeight="SemiBold"
                                   Foreground="{StaticResource ForegroundBrush}" Margin="0,0,0,20" />

                        <!-- Font Family -->
                        <Grid Margin="0,0,0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="160" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Font Family" Style="{StaticResource SectionLabel}" />
                            <ComboBox x:Name="FontFamilyCombo" Grid.Column="1"
                                      Style="{StaticResource SettingsCombo}"
                                      Background="#FF1A1A1A" Foreground="{StaticResource ForegroundBrush}"
                                      Width="320" HorizontalAlignment="Left"
                                      IsTextSearchEnabled="True" />
                        </Grid>

                        <!-- Font Size -->
                        <Grid Margin="0,0,0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="160" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Font Size" Style="{StaticResource SectionLabel}" />
                            <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                                <Slider x:Name="FontSizeSlider" Minimum="9" Maximum="28"
                                        Width="220" VerticalAlignment="Center"
                                        TickFrequency="1" IsSnapToTickEnabled="True"
                                        ValueChanged="FontSizeSlider_ValueChanged" />
                                <TextBlock x:Name="FontSizeValueText" Foreground="{StaticResource ForegroundDimBrush}"
                                           VerticalAlignment="Center" Margin="10,0,0,0" FontSize="12" />
                            </StackPanel>
                        </Grid>

                        <!-- Theme -->
                        <Grid Margin="0,0,0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="160" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Theme" Style="{StaticResource SectionLabel}" />
                            <StackPanel Grid.Column="1" Orientation="Horizontal">
                                <ComboBox x:Name="ThemeCombo" Style="{StaticResource SettingsCombo}"
                                          Background="#FF1A1A1A" Foreground="{StaticResource ForegroundBrush}"
                                          Width="200" SelectionChanged="ThemeCombo_SelectionChanged" />
                                <Border x:Name="ThemePreview" Width="60" Height="30" Margin="12,0,0,0"
                                        CornerRadius="4" BorderThickness="1"
                                        BorderBrush="{StaticResource BorderBrush}">
                                    <TextBlock x:Name="ThemePreviewText" Text="Aa" FontSize="13"
                                               FontWeight="SemiBold" HorizontalAlignment="Center"
                                               VerticalAlignment="Center" />
                                </Border>
                            </StackPanel>
                        </Grid>

                        <!-- Opacity -->
                        <Grid Margin="0,0,0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="160" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Opacity" Style="{StaticResource SectionLabel}" />
                            <StackPanel Grid.Column="1" Orientation="Horizontal">
                                <Slider x:Name="OpacitySlider" Minimum="0.5" Maximum="1.0"
                                        Width="200" VerticalAlignment="Center"
                                        TickFrequency="0.01" IsSnapToTickEnabled="True"
                                        ValueChanged="OpacitySlider_ValueChanged" />
                                <TextBlock x:Name="OpacityValueText" Foreground="{StaticResource ForegroundDimBrush}"
                                           VerticalAlignment="Center" Margin="10,0,0,0" FontSize="12" />
                            </StackPanel>
                        </Grid>

                        <!-- Cursor Style -->
                        <Grid Margin="0,0,0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="160" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Cursor Style" Style="{StaticResource SectionLabel}" />
                            <ComboBox x:Name="CursorStyleCombo" Grid.Column="1"
                                      Style="{StaticResource SettingsCombo}"
                                      Background="#FF1A1A1A" Foreground="{StaticResource ForegroundBrush}"
                                      Width="140" HorizontalAlignment="Left" />
                        </Grid>

                        <!-- Cursor Blink -->
                        <Grid Margin="0,0,0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="160" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Cursor Blink" Style="{StaticResource SectionLabel}" />
                            <CheckBox x:Name="CursorBlinkCheck" Grid.Column="1"
                                      Style="{StaticResource SettingsCheck}" />
                        </Grid>

                        <!-- System Theme (detected) -->
                        <Grid Margin="0,0,0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="160" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="System Theme" Style="{StaticResource SectionLabel}" />
                            <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                                <TextBlock x:Name="SystemThemeText" Text="Dark" FontSize="13"
                                           Foreground="{StaticResource ForegroundBrush}" />
                                <TextBlock Text=" (detected)" FontSize="12" Foreground="#FF6B7280" />
                            </StackPanel>
                        </Grid>
                    </StackPanel>

                    <!-- ═══ Terminal Section ═══ -->
                    <StackPanel x:Name="TerminalSection" Visibility="Collapsed">
                        <TextBlock Text="Terminal" FontSize="18" FontWeight="SemiBold"
                                   Foreground="{StaticResource ForegroundBrush}" Margin="0,0,0,20" />

                        <!-- Color Preset -->
                        <Grid Margin="0,0,0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="160" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Color Preset" Style="{StaticResource SectionLabel}" />
                            <ComboBox x:Name="TerminalThemePresetCombo" Grid.Column="1"
                                      Style="{StaticResource SettingsCombo}"
                                      Background="#FF1A1A1A" Foreground="{StaticResource ForegroundBrush}"
                                      Width="240" HorizontalAlignment="Left"
                                      SelectionChanged="TerminalThemePresetCombo_SelectionChanged" />
                        </Grid>

                        <!-- Use custom colors -->
                        <Grid Margin="0,0,0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="160" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Custom Colors" Style="{StaticResource SectionLabel}" />
                            <CheckBox x:Name="UseCustomTerminalColorsCheck" Grid.Column="1"
                                      Style="{StaticResource SettingsCheck}"
                                      Content="Override preset colors"
                                      Checked="UseCustomTerminalColorsCheck_Changed"
                                      Unchecked="UseCustomTerminalColorsCheck_Changed" />
                        </Grid>

                        <!-- Terminal color swatches -->
                        <Grid Margin="0,0,0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="160" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Background" Style="{StaticResource SectionLabel}" />
                            <StackPanel Grid.Column="1" Orientation="Horizontal" x:Name="TerminalBackgroundColorPanel">
                                <Border x:Name="TerminalBackgroundPreview" Width="30" Height="20" CornerRadius="3"
                                        BorderBrush="{StaticResource BorderBrush}" BorderThickness="1" Margin="0,0,8,0" />
                                <TextBox x:Name="TerminalBackgroundHexBox" Style="{StaticResource SettingsTextBox}" Width="110" Margin="0,0,8,0"
                                         TextChanged="TerminalColorHexBox_TextChanged" />
                                <Button Content="Pick" Style="{StaticResource CmuxButton}" Padding="10,5"
                                        Click="PickTerminalBackgroundColor_Click" />
                            </StackPanel>
                        </Grid>

                        <Grid Margin="0,0,0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="160" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Foreground" Style="{StaticResource SectionLabel}" />
                            <StackPanel Grid.Column="1" Orientation="Horizontal" x:Name="TerminalForegroundColorPanel">
                                <Border x:Name="TerminalForegroundPreview" Width="30" Height="20" CornerRadius="3"
                                        BorderBrush="{StaticResource BorderBrush}" BorderThickness="1" Margin="0,0,8,0" />
                                <TextBox x:Name="TerminalForegroundHexBox" Style="{StaticResource SettingsTextBox}" Width="110" Margin="0,0,8,0"
                                         TextChanged="TerminalColorHexBox_TextChanged" />
                                <Button Content="Pick" Style="{StaticResource CmuxButton}" Padding="10,5"
                                        Click="PickTerminalForegroundColor_Click" />
                            </StackPanel>
                        </Grid>

                        <Grid Margin="0,0,0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="160" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Cursor" Style="{StaticResource SectionLabel}" />
                            <StackPanel Grid.Column="1" Orientation="Horizontal" x:Name="TerminalCursorColorPanel">
                                <Border x:Name="TerminalCursorPreview" Width="30" Height="20" CornerRadius="3"
                                        BorderBrush="{StaticResource BorderBrush}" BorderThickness="1" Margin="0,0,8,0" />
                                <TextBox x:Name="TerminalCursorHexBox" Style="{StaticResource SettingsTextBox}" Width="110" Margin="0,0,8,0"
                                         TextChanged="TerminalColorHexBox_TextChanged" />
                                <Button Content="Pick" Style="{StaticResource CmuxButton}" Padding="10,5"
                                        Click="PickTerminalCursorColor_Click" />
                            </StackPanel>
                        </Grid>

                        <Grid Margin="0,0,0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="160" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Selection" Style="{StaticResource SectionLabel}" />
                            <StackPanel Grid.Column="1" Orientation="Horizontal" x:Name="TerminalSelectionColorPanel">
                                <Border x:Name="TerminalSelectionPreview" Width="30" Height="20" CornerRadius="3"
                                        BorderBrush="{StaticResource BorderBrush}" BorderThickness="1" Margin="0,0,8,0" />
                                <TextBox x:Name="TerminalSelectionHexBox" Style="{StaticResource SettingsTextBox}" Width="110" Margin="0,0,8,0"
                                         TextChanged="TerminalColorHexBox_TextChanged" />
                                <Button Content="Pick" Style="{StaticResource CmuxButton}" Padding="10,5"
                                        Click="PickTerminalSelectionColor_Click" />
                                <Button Content="Reset" Style="{StaticResource CmuxButton}" Padding="10,5" Margin="8,0,0,0"
                                        Click="ResetTerminalColors_Click" />
                            </StackPanel>
                        </Grid>

                        <!-- Default Shell -->
                        <Grid Margin="0,0,0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="160" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Default Shell" Style="{StaticResource SectionLabel}" />
                            <ComboBox x:Name="ShellCombo" Grid.Column="1"
                                      Style="{StaticResource SettingsCombo}"
                                      Background="#FF1A1A1A" Foreground="{StaticResource ForegroundBrush}" />
                        </Grid>

                        <!-- Shell Arguments -->
                        <Grid Margin="0,0,0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="160" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Shell Arguments" Style="{StaticResource SectionLabel}" />
                            <TextBox x:Name="ShellArgsBox" Grid.Column="1"
                                     Style="{StaticResource SettingsTextBox}" />
                        </Grid>

                        <!-- Scrollback Lines -->
                        <Grid Margin="0,0,0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="160" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Scrollback Lines" Style="{StaticResource SectionLabel}" />
                            <TextBox x:Name="ScrollbackBox" Grid.Column="1"
                                     Style="{StaticResource SettingsTextBox}" Width="100"
                                     HorizontalAlignment="Left" />
                        </Grid>

                        <!-- Visual Bell -->
                        <Grid Margin="0,0,0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="160" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Visual Bell" Style="{StaticResource SectionLabel}" />
                            <CheckBox x:Name="VisualBellCheck" Grid.Column="1"
                                      Style="{StaticResource SettingsCheck}" />
                        </Grid>

                        <!-- Bracketed Paste -->
                        <Grid Margin="0,0,0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="160" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Bracketed Paste" Style="{StaticResource SectionLabel}" />
                            <CheckBox x:Name="BracketedPasteCheck" Grid.Column="1"
                                      Style="{StaticResource SettingsCheck}" />
                        </Grid>
                    </StackPanel>

                    <!-- ═══ Behavior Section ═══ -->
                    <StackPanel x:Name="BehaviorSection" Visibility="Collapsed">
                        <TextBlock Text="Behavior" FontSize="18" FontWeight="SemiBold"
                                   Foreground="{StaticResource ForegroundBrush}" Margin="0,0,0,20" />

                        <!-- Restore Session -->
                        <Grid Margin="0,0,0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="160" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Restore Session" Style="{StaticResource SectionLabel}" />
                            <CheckBox x:Name="RestoreSessionCheck" Grid.Column="1"
                                      Style="{StaticResource SettingsCheck}"
                                      Content="Restore previous session on startup" />
                        </Grid>

                        <!-- Confirm on Close -->
                        <Grid Margin="0,0,0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="160" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Confirm Close" Style="{StaticResource SectionLabel}" />
                            <CheckBox x:Name="ConfirmCloseCheck" Grid.Column="1"
                                      Style="{StaticResource SettingsCheck}"
                                      Content="Ask before closing window" />
                        </Grid>

                        <!-- Auto Copy -->
                        <Grid Margin="0,0,0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="160" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Auto Copy" Style="{StaticResource SectionLabel}" />
                            <CheckBox x:Name="AutoCopyCheck" Grid.Column="1"
                                      Style="{StaticResource SettingsCheck}"
                                      Content="Copy to clipboard on text selection" />
                        </Grid>

                        <!-- Ctrl+Click URLs -->
                        <Grid Margin="0,0,0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="160" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Ctrl+Click URLs" Style="{StaticResource SectionLabel}" />
                            <CheckBox x:Name="CtrlClickUrlCheck" Grid.Column="1"
                                      Style="{StaticResource SettingsCheck}"
                                      Content="Open URLs with Ctrl+Click" />
                        </Grid>

                        <!-- Auto Save Interval -->
                        <Grid Margin="0,0,0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="160" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Auto Save (sec)" Style="{StaticResource SectionLabel}" />
                            <TextBox x:Name="AutoSaveBox" Grid.Column="1"
                                     Style="{StaticResource SettingsTextBox}" Width="80"
                                     HorizontalAlignment="Left" />
                        </Grid>

                        <!-- Log Retention -->
                        <Grid Margin="0,0,0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="160" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Log Retention (days)" Style="{StaticResource SectionLabel}" />
                            <TextBox x:Name="LogRetentionDaysBox" Grid.Column="1"
                                     Style="{StaticResource SettingsTextBox}" Width="80"
                                     HorizontalAlignment="Left" ToolTip="Delete log files older than this many days. Use 0 to keep logs forever." />
                        </Grid>

                        <!-- Capture transcript on close -->
                        <Grid Margin="0,0,0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="160" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Capture On Close" Style="{StaticResource SectionLabel}" />
                            <CheckBox x:Name="CaptureOnCloseCheck" Grid.Column="1"
                                      Style="{StaticResource SettingsCheck}"
                                      Content="Save terminal transcript when pane/surface/workspace/app closes" />
                        </Grid>

                        <!-- Capture transcript on clear -->
                        <Grid Margin="0,0,0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="160" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Capture On Clear" Style="{StaticResource SectionLabel}" />
                            <CheckBox x:Name="CaptureOnClearCheck" Grid.Column="1"
                                      Style="{StaticResource SettingsCheck}"
                                      Content="Save terminal transcript before Clear Terminal" />
                        </Grid>

                        <!-- Transcript retention -->
                        <Grid Margin="0,0,0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="160" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Capture Retention" Style="{StaticResource SectionLabel}" />
                            <TextBox x:Name="TranscriptRetentionDaysBox" Grid.Column="1"
                                     Style="{StaticResource SettingsTextBox}" Width="80"
                                     HorizontalAlignment="Left" ToolTip="Delete terminal captures older than this many days. Use 0 to keep forever." />
                        </Grid>
                    </StackPanel>

                    <!-- ═══ Keyboard Section ═══ -->
                    <StackPanel x:Name="KeyboardSection" Visibility="Collapsed">
                        <TextBlock Text="Keyboard Shortcuts" FontSize="18" FontWeight="SemiBold"
                                   Foreground="{StaticResource ForegroundBrush}" Margin="0,0,0,20" />

                        <Border Background="#FF1A1A1A" CornerRadius="6" Padding="16,12" Margin="0,0,0,6">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="160" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="28" />
                                    <RowDefinition Height="28" />
                                    <RowDefinition Height="28" />
                                    <RowDefinition Height="28" />
                                    <RowDefinition Height="28" />
                                    <RowDefinition Height="28" />
                                    <RowDefinition Height="28" />
                                    <RowDefinition Height="28" />
                                    <RowDefinition Height="28" />
                                    <RowDefinition Height="28" />
                                    <RowDefinition Height="28" />
                                    <RowDefinition Height="28" />
                                    <RowDefinition Height="28" />
                                    <RowDefinition Height="28" />
                                    <RowDefinition Height="28" />
                                </Grid.RowDefinitions>

                                <TextBlock Grid.Row="0" Grid.Column="0" Text="Ctrl+N" FontWeight="SemiBold"
                                           Foreground="{StaticResource AccentBrush}" FontSize="13" VerticalAlignment="Center" />
                                <TextBlock Grid.Row="0" Grid.Column="1" Text="New workspace"
                                           Foreground="{StaticResource ForegroundDimBrush}" FontSize="13" VerticalAlignment="Center" />

                                <TextBlock Grid.Row="1" Grid.Column="0" Text="Ctrl+T" FontWeight="SemiBold"
                                           Foreground="{StaticResource AccentBrush}" FontSize="13" VerticalAlignment="Center" />
                                <TextBlock Grid.Row="1" Grid.Column="1" Text="New surface"
                                           Foreground="{StaticResource ForegroundDimBrush}" FontSize="13" VerticalAlignment="Center" />

                                <TextBlock Grid.Row="2" Grid.Column="0" Text="Ctrl+D" FontWeight="SemiBold"
                                           Foreground="{StaticResource AccentBrush}" FontSize="13" VerticalAlignment="Center" />
                                <TextBlock Grid.Row="2" Grid.Column="1" Text="Split right"
                                           Foreground="{StaticResource ForegroundDimBrush}" FontSize="13" VerticalAlignment="Center" />

                                <TextBlock Grid.Row="3" Grid.Column="0" Text="Ctrl+Shift+D" FontWeight="SemiBold"
                                           Foreground="{StaticResource AccentBrush}" FontSize="13" VerticalAlignment="Center" />
                                <TextBlock Grid.Row="3" Grid.Column="1" Text="Split down"
                                           Foreground="{StaticResource ForegroundDimBrush}" FontSize="13" VerticalAlignment="Center" />

                                <TextBlock Grid.Row="4" Grid.Column="0" Text="Ctrl+W" FontWeight="SemiBold"
                                           Foreground="{StaticResource AccentBrush}" FontSize="13" VerticalAlignment="Center" />
                                <TextBlock Grid.Row="4" Grid.Column="1" Text="Close surface"
                                           Foreground="{StaticResource ForegroundDimBrush}" FontSize="13" VerticalAlignment="Center" />

                                <TextBlock Grid.Row="5" Grid.Column="0" Text="Ctrl+Shift+W" FontWeight="SemiBold"
                                           Foreground="{StaticResource AccentBrush}" FontSize="13" VerticalAlignment="Center" />
                                <TextBlock Grid.Row="5" Grid.Column="1" Text="Close workspace"
                                           Foreground="{StaticResource ForegroundDimBrush}" FontSize="13" VerticalAlignment="Center" />

                                <TextBlock Grid.Row="6" Grid.Column="0" Text="Ctrl+B" FontWeight="SemiBold"
                                           Foreground="{StaticResource AccentBrush}" FontSize="13" VerticalAlignment="Center" />
                                <TextBlock Grid.Row="6" Grid.Column="1" Text="Toggle sidebar"
                                           Foreground="{StaticResource ForegroundDimBrush}" FontSize="13" VerticalAlignment="Center" />

                                <TextBlock Grid.Row="7" Grid.Column="0" Text="Ctrl+I" FontWeight="SemiBold"
                                           Foreground="{StaticResource AccentBrush}" FontSize="13" VerticalAlignment="Center" />
                                <TextBlock Grid.Row="7" Grid.Column="1" Text="Notification panel"
                                           Foreground="{StaticResource ForegroundDimBrush}" FontSize="13" VerticalAlignment="Center" />

                                <TextBlock Grid.Row="8" Grid.Column="0" Text="Ctrl+Shift+U" FontWeight="SemiBold"
                                           Foreground="{StaticResource AccentBrush}" FontSize="13" VerticalAlignment="Center" />
                                <TextBlock Grid.Row="8" Grid.Column="1" Text="Jump to latest unread"
                                           Foreground="{StaticResource ForegroundDimBrush}" FontSize="13" VerticalAlignment="Center" />

                                <TextBlock Grid.Row="9" Grid.Column="0" Text="Ctrl+1-8" FontWeight="SemiBold"
                                           Foreground="{StaticResource AccentBrush}" FontSize="13" VerticalAlignment="Center" />
                                <TextBlock Grid.Row="9" Grid.Column="1" Text="Jump to workspace"
                                           Foreground="{StaticResource ForegroundDimBrush}" FontSize="13" VerticalAlignment="Center" />

                                <TextBlock Grid.Row="10" Grid.Column="0" Text="Ctrl+Alt+Arrow" FontWeight="SemiBold"
                                           Foreground="{StaticResource AccentBrush}" FontSize="13" VerticalAlignment="Center" />
                                <TextBlock Grid.Row="10" Grid.Column="1" Text="Focus pane directionally"
                                           Foreground="{StaticResource ForegroundDimBrush}" FontSize="13" VerticalAlignment="Center" />

                                <TextBlock Grid.Row="11" Grid.Column="0" Text="Ctrl+Shift+F" FontWeight="SemiBold"
                                           Foreground="{StaticResource AccentBrush}" FontSize="13" VerticalAlignment="Center" />
                                <TextBlock Grid.Row="11" Grid.Column="1" Text="Search in terminal"
                                           Foreground="{StaticResource ForegroundDimBrush}" FontSize="13" VerticalAlignment="Center" />

                                <TextBlock Grid.Row="12" Grid.Column="0" Text="Ctrl+Shift+L" FontWeight="SemiBold"
                                           Foreground="{StaticResource AccentBrush}" FontSize="13" VerticalAlignment="Center" />
                                <TextBlock Grid.Row="12" Grid.Column="1" Text="Open command logs"
                                           Foreground="{StaticResource ForegroundDimBrush}" FontSize="13" VerticalAlignment="Center" />

                                <TextBlock Grid.Row="13" Grid.Column="0" Text="Ctrl+Alt+H" FontWeight="SemiBold"
                                           Foreground="{StaticResource AccentBrush}" FontSize="13" VerticalAlignment="Center" />
                                <TextBlock Grid.Row="13" Grid.Column="1" Text="Open command history picker"
                                           Foreground="{StaticResource ForegroundDimBrush}" FontSize="13" VerticalAlignment="Center" />

                                <TextBlock Grid.Row="14" Grid.Column="0" Text="Ctrl+Shift+V" FontWeight="SemiBold"
                                           Foreground="{StaticResource AccentBrush}" FontSize="13" VerticalAlignment="Center" />
                                <TextBlock Grid.Row="14" Grid.Column="1" Text="Open session vault"
                                           Foreground="{StaticResource ForegroundDimBrush}" FontSize="13" VerticalAlignment="Center" />
                            </Grid>
                        </Border>
                    </StackPanel>

                    <!-- ═══ Agent Section ═══ -->
                    <StackPanel x:Name="AgentSection" Visibility="Collapsed">
                        <TextBlock Text="Agent" FontSize="18" FontWeight="SemiBold"
                                   Foreground="{StaticResource ForegroundBrush}" Margin="0,0,0,20" />

                        <Grid Margin="0,0,0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="160" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Enable Agent" Style="{StaticResource SectionLabel}" />
                            <CheckBox x:Name="AgentEnabledCheck" Grid.Column="1" Style="{StaticResource SettingsCheck}"
                                      Content="Enable pane handler commands" />
                        </Grid>

                        <Grid Margin="0,0,0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="160" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Agent Name" Style="{StaticResource SectionLabel}" />
                            <TextBox x:Name="AgentNameBox" Grid.Column="1" Style="{StaticResource SettingsTextBox}" Width="220" HorizontalAlignment="Left" />
                        </Grid>

                        <Grid Margin="0,0,0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="160" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Primary Handler" Style="{StaticResource SectionLabel}" />
                            <TextBox x:Name="AgentHandlerBox" Grid.Column="1" Style="{StaticResource SettingsTextBox}" Width="220" HorizontalAlignment="Left" />
                        </Grid>

                        <Grid Margin="0,0,0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="160" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Extra Handlers" Style="{StaticResource SectionLabel}" />
                            <TextBox x:Name="AgentAdditionalHandlersBox" Grid.Column="1" Style="{StaticResource SettingsTextBox}"
                                     ToolTip="Comma/space separated aliases (e.g. /bot /assistant)." />
                        </Grid>

                        <Grid Margin="0,0,0,14">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="160" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Active Provider" Style="{StaticResource SectionLabel}" />
                            <ComboBox x:Name="AgentProviderCombo" Grid.Column="1" Style="{StaticResource SettingsCombo}" Width="220" HorizontalAlignment="Left">
                                <ComboBoxItem Content="openai" />
                                <ComboBoxItem Content="anthropic" />
                            </ComboBox>
                        </Grid>

                        <TextBlock Text="System Prompt" Style="{StaticResource SectionLabel}" Margin="0,0,0,6" />
                        <TextBox x:Name="AgentSystemPromptBox" Style="{StaticResource SettingsTextBox}" Height="96"
                                 AcceptsReturn="True" VerticalScrollBarVisibility="Auto"
                                 TextWrapping="Wrap" Margin="0,0,0,12" />

                        <Border Background="#FF1A1A1A" CornerRadius="6" Padding="14,12" Margin="0,0,0,10">
                            <StackPanel>
                                <TextBlock Text="OpenAI-Compatible" FontWeight="SemiBold" Foreground="{StaticResource ForegroundBrush}" Margin="0,0,0,10" />

                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="120" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Base URL" Style="{StaticResource SectionLabel}" />
                                    <TextBox x:Name="OpenAiBaseUrlBox" Grid.Column="1" Style="{StaticResource SettingsTextBox}" />
                                </Grid>

                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="120" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Model" Style="{StaticResource SectionLabel}" />
                                    <TextBox x:Name="OpenAiModelBox" Grid.Column="1" Style="{StaticResource SettingsTextBox}" />
                                </Grid>

                                <Grid Margin="0,0,0,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="120" />
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="API Key" Style="{StaticResource SectionLabel}" />
                                    <PasswordBox x:Name="OpenAiApiKeyBox" Grid.Column="1" Style="{StaticResource SettingsPasswordBox}" />
                                    <Button Grid.Column="2" Content="Clear" Style="{StaticResource CmuxButton}" Padding="10,5"
                                            Margin="8,0,0,0" Click="ClearOpenAiKey_Click" />
                                </Grid>
                            </StackPanel>
                        </Border>

                        <Border Background="#FF1A1A1A" CornerRadius="6" Padding="14,12" Margin="0,0,0,10">
                            <StackPanel>
                                <TextBlock Text="Anthropic-Compatible" FontWeight="SemiBold" Foreground="{StaticResource ForegroundBrush}" Margin="0,0,0,10" />

                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="120" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Base URL" Style="{StaticResource SectionLabel}" />
                                    <TextBox x:Name="AnthropicBaseUrlBox" Grid.Column="1" Style="{StaticResource SettingsTextBox}" />
                                </Grid>

                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="120" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Model" Style="{StaticResource SectionLabel}" />
                                    <TextBox x:Name="AnthropicModelBox" Grid.Column="1" Style="{StaticResource SettingsTextBox}" />
                                </Grid>

                                <Grid Margin="0,0,0,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="120" />
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="API Key" Style="{StaticResource SectionLabel}" />
                                    <PasswordBox x:Name="AnthropicApiKeyBox" Grid.Column="1" Style="{StaticResource SettingsPasswordBox}" />
                                    <Button Grid.Column="2" Content="Clear" Style="{StaticResource CmuxButton}" Padding="10,5"
                                            Margin="8,0,0,0" Click="ClearAnthropicKey_Click" />
                                </Grid>
                            </StackPanel>
                        </Border>

                        <Border Background="#FF1A1A1A" CornerRadius="6" Padding="14,12" Margin="0,0,0,10">
                            <StackPanel>
                                <TextBlock Text="Tools" FontWeight="SemiBold" Foreground="{StaticResource ForegroundBrush}" Margin="0,0,0,10" />

                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="120" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Bash Tool" Style="{StaticResource SectionLabel}" />
                                    <CheckBox x:Name="AgentBashToolCheck" Grid.Column="1" Style="{StaticResource SettingsCheck}" />
                                </Grid>

                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="120" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Bash Timeout" Style="{StaticResource SectionLabel}" />
                                    <TextBox x:Name="AgentBashTimeoutBox" Grid.Column="1" Style="{StaticResource SettingsTextBox}" Width="100" HorizontalAlignment="Left" />
                                </Grid>

                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="120" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Web Search" Style="{StaticResource SectionLabel}" />
                                    <CheckBox x:Name="AgentWebSearchCheck" Grid.Column="1" Style="{StaticResource SettingsCheck}" />
                                </Grid>

                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="120" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Exa Base URL" Style="{StaticResource SectionLabel}" />
                                    <TextBox x:Name="ExaBaseUrlBox" Grid.Column="1" Style="{StaticResource SettingsTextBox}" />
                                </Grid>

                                <Grid Margin="0,0,0,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="120" />
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Exa API Key" Style="{StaticResource SectionLabel}" />
                                    <PasswordBox x:Name="ExaApiKeyBox" Grid.Column="1" Style="{StaticResource SettingsPasswordBox}" />
                                <Button Grid.Column="2" Content="Clear" Style="{StaticResource CmuxButton}" Padding="10,5"
                                            Margin="8,0,0,0" Click="ClearExaKey_Click" />
                                </Grid>
                            </StackPanel>
                        </Border>

                        <Border Background="#FF1A1A1A" CornerRadius="6" Padding="14,12" Margin="0,0,0,10">
                            <StackPanel>
                                <TextBlock Text="Pane Submit" FontWeight="SemiBold" Foreground="{StaticResource ForegroundBrush}" Margin="0,0,0,10" />

                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="180" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Default Submit Key" Style="{StaticResource SectionLabel}" />
                                    <ComboBox x:Name="AgentDefaultSubmitKeyCombo" Grid.Column="1" Style="{StaticResource SettingsCombo}" Width="220" HorizontalAlignment="Left">
                                        <ComboBoxItem Content="auto" />
                                        <ComboBoxItem Content="enter" />
                                        <ComboBoxItem Content="linefeed" />
                                        <ComboBoxItem Content="crlf" />
                                    </ComboBox>
                                </Grid>

                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="180" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Enable Auto Fallback" Style="{StaticResource SectionLabel}" />
                                    <CheckBox x:Name="AgentEnableSubmitFallbackCheck" Grid.Column="1" Style="{StaticResource SettingsCheck}" />
                                </Grid>

                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="180" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Fallback Wait (ms)" Style="{StaticResource SectionLabel}" />
                                    <TextBox x:Name="AgentSubmitFallbackWaitMsBox" Grid.Column="1" Style="{StaticResource SettingsTextBox}" Width="120" HorizontalAlignment="Left" />
                                </Grid>

                                <Grid Margin="0,0,0,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="180" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Fallback Order" Style="{StaticResource SectionLabel}" />
                                    <TextBox x:Name="AgentSubmitFallbackOrderBox" Grid.Column="1" Style="{StaticResource SettingsTextBox}"
                                             ToolTip="Comma-separated keys, e.g. enter,linefeed,crlf" />
                                </Grid>
                            </StackPanel>
                        </Border>

                        <Border Background="#FF1A1A1A" CornerRadius="6" Padding="14,12" Margin="0,0,0,10">
                            <StackPanel>
                                <TextBlock Text="Agent Files &amp; Skills" FontWeight="SemiBold" Foreground="{StaticResource ForegroundBrush}" Margin="0,0,0,10" />

                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="180" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Auto Discover" Style="{StaticResource SectionLabel}" />
                                    <CheckBox x:Name="AgentAutoDiscoverFilesCheck" Grid.Column="1" Style="{StaticResource SettingsCheck}" />
                                </Grid>

                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="180" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Instructions Path" Style="{StaticResource SectionLabel}" />
                                    <TextBox x:Name="AgentInstructionsPathBox" Grid.Column="1" Style="{StaticResource SettingsTextBox}"
                                             ToolTip="Path to agents.md/AGENTS.md file. Leave empty to use auto discovery." />
                                </Grid>

                                <Grid Margin="0,0,0,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="180" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Skills Root Path" Style="{StaticResource SectionLabel}" />
                                    <TextBox x:Name="AgentSkillsRootPathBox" Grid.Column="1" Style="{StaticResource SettingsTextBox}"
                                             ToolTip="Path to skills root folder. Leave empty to use auto discovery." />
                                </Grid>
                            </StackPanel>
                        </Border>

                        <Border Background="#FF1A1A1A" CornerRadius="6" Padding="14,12" Margin="0,0,0,10">
                            <StackPanel>
                                <TextBlock Text="Chat Panel" FontWeight="SemiBold" Foreground="{StaticResource ForegroundBrush}" Margin="0,0,0,10" />

                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="180" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Chat Font Family" Style="{StaticResource SectionLabel}" />
                                    <ComboBox x:Name="AgentChatFontFamilyCombo" Grid.Column="1" Style="{StaticResource SettingsCombo}"
                                              IsEditable="True" IsTextSearchEnabled="True" />
                                </Grid>

                                <Grid Margin="0,0,0,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="180" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Chat Font Size" Style="{StaticResource SectionLabel}" />
                                    <TextBox x:Name="AgentChatFontSizeBox" Grid.Column="1" Style="{StaticResource SettingsTextBox}" Width="100" HorizontalAlignment="Left" />
                                </Grid>
                            </StackPanel>
                        </Border>

                        <Border Background="#FF1A1A1A" CornerRadius="6" Padding="14,12" Margin="0,0,0,10">
                            <StackPanel>
                                <TextBlock Text="Conversation Memory" FontWeight="SemiBold" Foreground="{StaticResource ForegroundBrush}" Margin="0,0,0,10" />

                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="180" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Enable Memory" Style="{StaticResource SectionLabel}" />
                                    <CheckBox x:Name="AgentMemoryCheck" Grid.Column="1" Style="{StaticResource SettingsCheck}" />
                                </Grid>

                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="180" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Enable Streaming" Style="{StaticResource SectionLabel}" />
                                    <CheckBox x:Name="AgentStreamingCheck" Grid.Column="1" Style="{StaticResource SettingsCheck}" />
                                </Grid>

                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="180" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Auto Compact Context" Style="{StaticResource SectionLabel}" />
                                    <CheckBox x:Name="AgentAutoCompactCheck" Grid.Column="1" Style="{StaticResource SettingsCheck}" />
                                </Grid>

                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="180" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Max Context Messages" Style="{StaticResource SectionLabel}" />
                                    <TextBox x:Name="AgentContextMaxMessagesBox" Grid.Column="1" Style="{StaticResource SettingsTextBox}" Width="100" HorizontalAlignment="Left" />
                                </Grid>

                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="180" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Context Budget Tokens" Style="{StaticResource SectionLabel}" />
                                    <TextBox x:Name="AgentContextBudgetTokensBox" Grid.Column="1" Style="{StaticResource SettingsTextBox}" Width="120" HorizontalAlignment="Left" />
                                </Grid>

                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="180" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Compact Threshold %" Style="{StaticResource SectionLabel}" />
                                    <TextBox x:Name="AgentCompactThresholdBox" Grid.Column="1" Style="{StaticResource SettingsTextBox}" Width="80" HorizontalAlignment="Left" />
                                </Grid>

                                <Grid Margin="0,0,0,0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="180" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Keep Recent on Compact" Style="{StaticResource SectionLabel}" />
                                    <TextBox x:Name="AgentKeepRecentOnCompactionBox" Grid.Column="1" Style="{StaticResource SettingsTextBox}" Width="100" HorizontalAlignment="Left" />
                                </Grid>
                            </StackPanel>
                        </Border>

                        <Grid Margin="0,2,0,6">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="160" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Custom Tools Mode" Style="{StaticResource SectionLabel}" />
                            <ComboBox x:Name="CustomToolsModeCombo" Grid.Column="1" Style="{StaticResource SettingsCombo}" Width="220"
                                      HorizontalAlignment="Left" SelectionChanged="CustomToolsModeCombo_SelectionChanged">
                                <ComboBoxItem Content="Creator" />
                                <ComboBoxItem Content="JSON" />
                            </ComboBox>
                        </Grid>

                        <StackPanel x:Name="CustomToolsCreatorPanel" Margin="0,0,0,10">
                            <ListBox x:Name="CustomToolsListBox" Height="100" DisplayMemberPath="Name"
                                     Style="{StaticResource SettingsListBox}" ItemContainerStyle="{StaticResource SettingsListBoxItem}"
                                     SelectionChanged="CustomToolsListBox_SelectionChanged" Margin="0,0,0,8" />
                            <Grid Margin="0,0,0,6">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="120" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="Name" Style="{StaticResource SectionLabel}" />
                                <TextBox x:Name="CustomToolNameBox" Grid.Column="1" Style="{StaticResource SettingsTextBox}" />
                            </Grid>
                            <Grid Margin="0,0,0,6">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="120" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="Description" Style="{StaticResource SectionLabel}" />
                                <TextBox x:Name="CustomToolDescriptionBox" Grid.Column="1" Style="{StaticResource SettingsTextBox}" />
                            </Grid>
                            <Grid Margin="0,0,0,6">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="120" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="Command Template" Style="{StaticResource SectionLabel}" />
                                <TextBox x:Name="CustomToolCommandTemplateBox" Grid.Column="1" Style="{StaticResource SettingsTextBox}" />
                            </Grid>
                            <CheckBox x:Name="CustomToolEnabledCheck" Content="Enabled" Style="{StaticResource SettingsCheck}" Margin="0,0,0,6" />
                            <StackPanel Orientation="Horizontal">
                                <Button Content="Add / Update" Style="{StaticResource CmuxButton}" Padding="12,6" Click="AddOrUpdateCustomTool_Click" />
                                <Button Content="Remove Selected" Style="{StaticResource CmuxButton}" Padding="12,6" Margin="8,0,0,0"
                                        Click="RemoveSelectedCustomTool_Click" />
                            </StackPanel>
                        </StackPanel>

                        <StackPanel x:Name="CustomToolsJsonPanel" Visibility="Collapsed" Margin="0,0,0,10">
                            <TextBlock Text="Custom Tools JSON (array of { enabled, name, description, commandTemplate })"
                                       Foreground="{StaticResource ForegroundDimBrush}" Margin="0,2,0,6" />
                            <TextBox x:Name="CustomToolsJsonBox" Style="{StaticResource SettingsTextBox}" Height="120"
                                     AcceptsReturn="True" VerticalScrollBarVisibility="Auto"
                                     TextWrapping="NoWrap" FontFamily="Cascadia Code" FontSize="12" />
                        </StackPanel>

                        <Grid Margin="0,2,0,6">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="160" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="MCP Servers Mode" Style="{StaticResource SectionLabel}" />
                            <ComboBox x:Name="McpServersModeCombo" Grid.Column="1" Style="{StaticResource SettingsCombo}" Width="220"
                                      HorizontalAlignment="Left" SelectionChanged="McpServersModeCombo_SelectionChanged">
                                <ComboBoxItem Content="Creator" />
                                <ComboBoxItem Content="JSON" />
                            </ComboBox>
                        </Grid>

                        <StackPanel x:Name="McpServersCreatorPanel">
                            <ListBox x:Name="McpServersListBox" Height="100" DisplayMemberPath="Name"
                                     Style="{StaticResource SettingsListBox}" ItemContainerStyle="{StaticResource SettingsListBoxItem}"
                                     SelectionChanged="McpServersListBox_SelectionChanged" Margin="0,0,0,8" />
                            <Grid Margin="0,0,0,6">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="120" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="Name" Style="{StaticResource SectionLabel}" />
                                <TextBox x:Name="McpServerNameBox" Grid.Column="1" Style="{StaticResource SettingsTextBox}" />
                            </Grid>
                            <Grid Margin="0,0,0,6">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="120" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="Command" Style="{StaticResource SectionLabel}" />
                                <TextBox x:Name="McpServerCommandBox" Grid.Column="1" Style="{StaticResource SettingsTextBox}" />
                            </Grid>
                            <Grid Margin="0,0,0,6">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="120" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="Arguments" Style="{StaticResource SectionLabel}" />
                                <TextBox x:Name="McpServerArgumentsBox" Grid.Column="1" Style="{StaticResource SettingsTextBox}" />
                            </Grid>
                            <Grid Margin="0,0,0,6">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="120" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="Working Dir" Style="{StaticResource SectionLabel}" />
                                <TextBox x:Name="McpServerWorkingDirectoryBox" Grid.Column="1" Style="{StaticResource SettingsTextBox}" />
                            </Grid>
                            <CheckBox x:Name="McpServerEnabledCheck" Content="Enabled" Style="{StaticResource SettingsCheck}" Margin="0,0,0,6" />
                            <StackPanel Orientation="Horizontal">
                                <Button Content="Add / Update" Style="{StaticResource CmuxButton}" Padding="12,6" Click="AddOrUpdateMcpServer_Click" />
                                <Button Content="Remove Selected" Style="{StaticResource CmuxButton}" Padding="12,6" Margin="8,0,0,0"
                                        Click="RemoveSelectedMcpServer_Click" />
                            </StackPanel>
                        </StackPanel>

                        <StackPanel x:Name="McpServersJsonPanel" Visibility="Collapsed">
                            <TextBlock Text="MCP Servers JSON (array of { enabled, name, command, arguments, workingDirectory })"
                                       Foreground="{StaticResource ForegroundDimBrush}" Margin="0,2,0,6" />
                            <TextBox x:Name="McpServersJsonBox" Style="{StaticResource SettingsTextBox}" Height="120"
                                     AcceptsReturn="True" VerticalScrollBarVisibility="Auto"
                                     TextWrapping="NoWrap" FontFamily="Cascadia Code" FontSize="12" />
                        </StackPanel>
                    </StackPanel>

                    <!-- ═══ About Section ═══ -->
                    <StackPanel x:Name="AboutSection" Visibility="Collapsed">
                        <TextBlock Text="About" FontSize="18" FontWeight="SemiBold"
                                   Foreground="{StaticResource ForegroundBrush}" Margin="0,0,0,20" />

                        <Border Background="#FF1A1A1A" CornerRadius="6" Padding="20,16" Margin="0,0,0,12">
                            <StackPanel>
                                <TextBlock Text="cmux for Windows" FontSize="20" FontWeight="Bold"
                                           Foreground="{StaticResource ForegroundBrush}" Margin="0,0,0,4" />
                                <TextBlock Text="v0.1.3" FontSize="13"
                                           Foreground="{StaticResource AccentBrush}" Margin="0,0,0,12" />
                                <TextBlock Text="A modern terminal multiplexer designed for AI coding agents. Split panes, workspaces, command palette, and intelligent terminal management."
                                           Foreground="{StaticResource ForegroundDimBrush}" FontSize="13"
                                           TextWrapping="Wrap" LineHeight="20" Margin="0,0,0,12" />
                                <Border Height="1" Background="{StaticResource BorderBrush}" Margin="0,4,0,12" />
                                <TextBlock Foreground="{StaticResource ForegroundDimBrush}" FontSize="12">
                                    <Run Text="Runtime: .NET 10" /><LineBreak />
                                    <Run Text="Framework: WPF + CommunityToolkit.Mvvm" /><LineBreak />
                                    <Run Text="Config: %LOCALAPPDATA%\cmux\settings.json" />
                                </TextBlock>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                    </Grid>
                </ScrollViewer>
            </Grid>

            <!-- Bottom Bar -->
            <Border Grid.Row="2" BorderThickness="0,1,0,0" BorderBrush="{StaticResource BorderBrush}"
                    Padding="18,12">
                <Grid>
                    <Button Content="Reset to Defaults" Style="{StaticResource CmuxButton}"
                            Click="Reset_Click" HorizontalAlignment="Left" Padding="14,7" />
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                        <Button Content="Cancel" Style="{StaticResource CmuxButton}"
                                Click="Cancel_Click" Padding="16,7" Margin="0,0,8,0" />
                        <Button Content="Save" Style="{StaticResource AccentButton}"
                                Click="Save_Click" Padding="20,7" />
                    </StackPanel>
                </Grid>
            </Border>
        </Grid>
    </Border>
</Window>

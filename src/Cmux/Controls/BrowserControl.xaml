<UserControl x:Class="Cmux.Controls.BrowserControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:wv2="clr-namespace:Microsoft.Web.WebView2.Wpf;assembly=Microsoft.Web.WebView2.Wpf"
             Background="{StaticResource BackgroundBrush}">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="36" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!-- Browser toolbar -->
        <Grid Grid.Row="0" Background="{StaticResource SurfaceTabBackgroundBrush}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <Button Grid.Column="0" Content="&#xE72B;" FontFamily="Segoe MDL2 Assets"
                    Style="{StaticResource CmuxButton}" Click="Back_Click"
                    Width="32" Height="28" Padding="0" Margin="4,0,0,0" FontSize="12" />

            <Button Grid.Column="1" Content="&#xE72A;" FontFamily="Segoe MDL2 Assets"
                    Style="{StaticResource CmuxButton}" Click="Forward_Click"
                    Width="32" Height="28" Padding="0" FontSize="12" />

            <Button Grid.Column="2" Content="&#xE72C;" FontFamily="Segoe MDL2 Assets"
                    Style="{StaticResource CmuxButton}" Click="Reload_Click"
                    Width="32" Height="28" Padding="0" FontSize="12" />

            <!-- Address bar -->
            <Border Grid.Column="3" CornerRadius="6" Margin="4"
                    Background="{StaticResource SurfaceHighBrush}">
                <TextBox x:Name="AddressBar"
                         Background="Transparent" Foreground="{StaticResource ForegroundBrush}"
                         CaretBrush="{StaticResource AccentBrush}"
                         BorderThickness="0" FontSize="12" Padding="8,4"
                         VerticalContentAlignment="Center"
                         KeyDown="AddressBar_KeyDown" />
            </Border>

            <Button Grid.Column="4" Content="&#xE10A;" FontFamily="Segoe MDL2 Assets"
                    Style="{StaticResource CmuxButton}" Click="CloseBrowser_Click"
                    Width="32" Height="28" Padding="0" Margin="0,0,4,0" FontSize="10" />
        </Grid>

        <!-- WebView2 -->
        <wv2:WebView2 Grid.Row="1" x:Name="WebView"
                      NavigationCompleted="WebView_NavigationCompleted"
                      SourceChanged="WebView_SourceChanged" />
    </Grid>
</UserControl>

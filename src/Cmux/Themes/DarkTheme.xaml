<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:system="clr-namespace:System;assembly=mscorlib">

    <!-- cmux Dark Theme — deep blacks, indigo/purple accents, premium feel -->

    <!-- ═══════════════════════════════════════════════════════════════════
         Base Colors (existing keys preserved)
         ═══════════════════════════════════════════════════════════════════ -->
    <Color x:Key="BackgroundColor">#FF0F0F0F</Color>
    <Color x:Key="SidebarBackgroundColor">#FF0A0A0A</Color>
    <Color x:Key="SidebarItemHoverColor">#FF1A1A2E</Color>
    <Color x:Key="SidebarItemSelectedColor">#FF252547</Color>
    <Color x:Key="ForegroundColor">#FFE2E2E9</Color>
    <Color x:Key="ForegroundDimColor">#FF6B6B80</Color>
    <Color x:Key="AccentColor">#FF818CF8</Color>
    <Color x:Key="NotificationColor">#FF6366F1</Color>
    <Color x:Key="BorderColor">#FF2A2A3C</Color>
    <Color x:Key="SurfaceTabBackgroundColor">#FF161622</Color>
    <Color x:Key="SurfaceTabSelectedColor">#FF1E1E32</Color>
    <Color x:Key="DividerColor">#FF2E2E42</Color>
    <Color x:Key="ErrorColor">#FFEF4444</Color>
    <Color x:Key="SuccessColor">#FF34D399</Color>
    <Color x:Key="WarningColor">#FFFBBF24</Color>

    <!-- New accent colors -->
    <Color x:Key="AccentGlowColor">#80818CF8</Color>
    <Color x:Key="SurfaceColor">#FF141420</Color>
    <Color x:Key="SurfaceHighColor">#FF1C1C30</Color>
    <Color x:Key="PurpleAccent">#FFA78BFA</Color>
    <Color x:Key="TealAccent">#FF2DD4BF</Color>
    <Color x:Key="PinkAccent">#FFF472B6</Color>
    <Color x:Key="OrangeAccent">#FFFB923C</Color>

    <!-- ═══════════════════════════════════════════════════════════════════
         Brushes (existing keys preserved)
         ═══════════════════════════════════════════════════════════════════ -->
    <SolidColorBrush x:Key="BackgroundBrush" Color="{StaticResource BackgroundColor}" />
    <SolidColorBrush x:Key="SidebarBackgroundBrush" Color="{StaticResource SidebarBackgroundColor}" />
    <SolidColorBrush x:Key="SidebarItemHoverBrush" Color="{StaticResource SidebarItemHoverColor}" />
    <SolidColorBrush x:Key="SidebarItemSelectedBrush" Color="{StaticResource SidebarItemSelectedColor}" />
    <SolidColorBrush x:Key="ForegroundBrush" Color="{StaticResource ForegroundColor}" />
    <SolidColorBrush x:Key="ForegroundDimBrush" Color="{StaticResource ForegroundDimColor}" />
    <SolidColorBrush x:Key="AccentBrush" Color="{StaticResource AccentColor}" />
    <SolidColorBrush x:Key="NotificationBrush" Color="{StaticResource NotificationColor}" />
    <SolidColorBrush x:Key="BorderBrush" Color="{StaticResource BorderColor}" />
    <SolidColorBrush x:Key="SurfaceTabBackgroundBrush" Color="{StaticResource SurfaceTabBackgroundColor}" />
    <SolidColorBrush x:Key="SurfaceTabSelectedBrush" Color="{StaticResource SurfaceTabSelectedColor}" />
    <SolidColorBrush x:Key="DividerBrush" Color="{StaticResource DividerColor}" />
    <SolidColorBrush x:Key="ErrorBrush" Color="{StaticResource ErrorColor}" />
    <SolidColorBrush x:Key="SuccessBrush" Color="{StaticResource SuccessColor}" />
    <SolidColorBrush x:Key="WarningBrush" Color="{StaticResource WarningColor}" />

    <!-- New brushes -->
    <SolidColorBrush x:Key="SurfaceBrush" Color="{StaticResource SurfaceColor}" />
    <SolidColorBrush x:Key="SurfaceHighBrush" Color="{StaticResource SurfaceHighColor}" />

    <LinearGradientBrush x:Key="AccentGradientBrush" StartPoint="0,0" EndPoint="1,1">
        <GradientStop Color="#FF6366F1" Offset="0.0" />
        <GradientStop Color="#FF818CF8" Offset="0.5" />
        <GradientStop Color="#FFA78BFA" Offset="1.0" />
    </LinearGradientBrush>

    <LinearGradientBrush x:Key="SidebarGradientBrush" StartPoint="0,0" EndPoint="0,1">
        <GradientStop Color="#FF0A0A0A" Offset="0.0" />
        <GradientStop Color="#FF0F0F1A" Offset="1.0" />
    </LinearGradientBrush>

    <RadialGradientBrush x:Key="SelectedTabGlow" GradientOrigin="0.5,0.5" Center="0.5,0.5" RadiusX="0.8" RadiusY="0.8">
        <GradientStop Color="#30818CF8" Offset="0.0" />
        <GradientStop Color="#00818CF8" Offset="1.0" />
    </RadialGradientBrush>

    <!-- ═══════════════════════════════════════════════════════════════════
         Effects
         ═══════════════════════════════════════════════════════════════════ -->
    <DropShadowEffect x:Key="FloatingShadow" BlurRadius="20" ShadowDepth="4"
                      Direction="270" Color="#CC000000" Opacity="0.6" />

    <DropShadowEffect x:Key="SubtleShadow" BlurRadius="8" ShadowDepth="2"
                      Direction="270" Color="#99000000" Opacity="0.4" />

    <DropShadowEffect x:Key="GlowEffect" BlurRadius="16" ShadowDepth="0"
                      Direction="0" Color="{StaticResource AccentColor}" Opacity="0.5" />

    <!-- ═══════════════════════════════════════════════════════════════════
         Font Sizes (existing keys preserved + new)
         ═══════════════════════════════════════════════════════════════════ -->
    <system:Double x:Key="FontSizeSmall">11</system:Double>
    <system:Double x:Key="FontSizeNormal">13</system:Double>
    <system:Double x:Key="FontSizeLarge">15</system:Double>
    <system:Double x:Key="FontSizeTitle">18</system:Double>

    <!-- ═══════════════════════════════════════════════════════════════════
         Animation Durations
         ═══════════════════════════════════════════════════════════════════ -->
    <Duration x:Key="FastAnimation">0:0:0.15</Duration>
    <Duration x:Key="NormalAnimation">0:0:0.25</Duration>
    <Duration x:Key="SlowAnimation">0:0:0.4</Duration>

    <!-- ═══════════════════════════════════════════════════════════════════
         Scrollbar Thumb (existing key preserved, enhanced with hover animation)
         ═══════════════════════════════════════════════════════════════════ -->
    <Style x:Key="DarkScrollBarThumb" TargetType="Thumb">
        <Setter Property="OverridesDefaultStyle" Value="True" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Thumb">
                    <Border x:Name="thumbBorder" CornerRadius="4" Margin="1">
                        <Border.Background>
                            <SolidColorBrush x:Name="thumbBrush" Color="#FF3A3A50" />
                        </Border.Background>
                    </Border>
                    <ControlTemplate.Triggers>
                        <EventTrigger RoutedEvent="Mouse.MouseEnter">
                            <BeginStoryboard>
                                <Storyboard>
                                    <ColorAnimation Storyboard.TargetName="thumbBrush"
                                                    Storyboard.TargetProperty="Color"
                                                    To="#FF818CF8" Duration="0:0:0.15" />
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger>
                        <EventTrigger RoutedEvent="Mouse.MouseLeave">
                            <BeginStoryboard>
                                <Storyboard>
                                    <ColorAnimation Storyboard.TargetName="thumbBrush"
                                                    Storyboard.TargetProperty="Color"
                                                    To="#FF3A3A50" Duration="0:0:0.25" />
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- ═══════════════════════════════════════════════════════════════════
         CmuxButton (existing key preserved — ghost button, CornerRadius 6)
         ═══════════════════════════════════════════════════════════════════ -->
    <Style x:Key="CmuxButton" TargetType="Button">
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="Foreground" Value="{StaticResource ForegroundBrush}" />
        <Setter Property="BorderThickness" Value="0" />
        <Setter Property="Padding" Value="12,6" />
        <Setter Property="Cursor" Value="Hand" />
        <Setter Property="FocusVisualStyle" Value="{x:Null}" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border x:Name="border"
                            CornerRadius="6"
                            Padding="{TemplateBinding Padding}">
                        <Border.Background>
                            <SolidColorBrush x:Name="borderBrush" Color="Transparent" />
                        </Border.Background>
                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                    </Border>
                    <ControlTemplate.Triggers>
                        <EventTrigger RoutedEvent="Mouse.MouseEnter">
                            <BeginStoryboard>
                                <Storyboard>
                                    <ColorAnimation Storyboard.TargetName="borderBrush"
                                                    Storyboard.TargetProperty="Color"
                                                    To="#FF1A1A2E" Duration="0:0:0.15" />
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger>
                        <EventTrigger RoutedEvent="Mouse.MouseLeave">
                            <BeginStoryboard>
                                <Storyboard>
                                    <ColorAnimation Storyboard.TargetName="borderBrush"
                                                    Storyboard.TargetProperty="Color"
                                                    To="Transparent" Duration="0:0:0.15" />
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger>
                        <Trigger Property="IsPressed" Value="True">
                            <Setter TargetName="border" Property="Background" Value="{StaticResource SidebarItemSelectedBrush}" />
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter Property="Opacity" Value="0.4" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- ═══════════════════════════════════════════════════════════════════
         AccentButton — gradient background, prominent CTA
         ═══════════════════════════════════════════════════════════════════ -->
    <Style x:Key="AccentButton" TargetType="Button">
        <Setter Property="Foreground" Value="#FFFFFFFF" />
        <Setter Property="FontWeight" Value="SemiBold" />
        <Setter Property="BorderThickness" Value="0" />
        <Setter Property="Padding" Value="16,8" />
        <Setter Property="Cursor" Value="Hand" />
        <Setter Property="FocusVisualStyle" Value="{x:Null}" />
        <Setter Property="Effect" Value="{StaticResource SubtleShadow}" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border x:Name="border" CornerRadius="6"
                            Padding="{TemplateBinding Padding}"
                            Background="{StaticResource AccentGradientBrush}">
                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Effect" Value="{StaticResource GlowEffect}" />
                        </Trigger>
                        <Trigger Property="IsPressed" Value="True">
                            <Setter TargetName="border" Property="Opacity" Value="0.85" />
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter Property="Opacity" Value="0.4" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- ═══════════════════════════════════════════════════════════════════
         IconButton — minimal 28×28 square, for toolbar icons
         ═══════════════════════════════════════════════════════════════════ -->
    <Style x:Key="IconButton" TargetType="Button">
        <Setter Property="Width" Value="28" />
        <Setter Property="Height" Value="28" />
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="Foreground" Value="{StaticResource ForegroundDimBrush}" />
        <Setter Property="BorderThickness" Value="0" />
        <Setter Property="Padding" Value="4" />
        <Setter Property="Cursor" Value="Hand" />
        <Setter Property="FocusVisualStyle" Value="{x:Null}" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border x:Name="border" CornerRadius="4"
                            Width="{TemplateBinding Width}"
                            Height="{TemplateBinding Height}"
                            Padding="{TemplateBinding Padding}">
                        <Border.Background>
                            <SolidColorBrush x:Name="iconBtnBg" Color="Transparent" />
                        </Border.Background>
                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                    </Border>
                    <ControlTemplate.Triggers>
                        <EventTrigger RoutedEvent="Mouse.MouseEnter">
                            <BeginStoryboard>
                                <Storyboard>
                                    <ColorAnimation Storyboard.TargetName="iconBtnBg"
                                                    Storyboard.TargetProperty="Color"
                                                    To="#FF1A1A2E" Duration="0:0:0.15" />
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger>
                        <EventTrigger RoutedEvent="Mouse.MouseLeave">
                            <BeginStoryboard>
                                <Storyboard>
                                    <ColorAnimation Storyboard.TargetName="iconBtnBg"
                                                    Storyboard.TargetProperty="Color"
                                                    To="Transparent" Duration="0:0:0.15" />
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger>
                        <Trigger Property="IsPressed" Value="True">
                            <Setter TargetName="border" Property="Background" Value="{StaticResource SidebarItemSelectedBrush}" />
                        </Trigger>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Foreground" Value="{StaticResource ForegroundBrush}" />
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter Property="Opacity" Value="0.3" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- ═══════════════════════════════════════════════════════════════════
         CmuxTextBox — dark input with focus ring
         ═══════════════════════════════════════════════════════════════════ -->
    <Style x:Key="CmuxTextBox" TargetType="TextBox">
        <Setter Property="Background" Value="{StaticResource SurfaceBrush}" />
        <Setter Property="Foreground" Value="{StaticResource ForegroundBrush}" />
        <Setter Property="CaretBrush" Value="{StaticResource AccentBrush}" />
        <Setter Property="BorderBrush" Value="{StaticResource BorderBrush}" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="Padding" Value="8,6" />
        <Setter Property="FontSize" Value="{StaticResource FontSizeNormal}" />
        <Setter Property="SelectionBrush" Value="{StaticResource AccentBrush}" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="TextBox">
                    <Border x:Name="border" CornerRadius="6"
                            Background="{TemplateBinding Background}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            Padding="{TemplateBinding Padding}">
                        <Border.BorderBrush>
                            <SolidColorBrush x:Name="borderStroke" Color="{StaticResource BorderColor}" />
                        </Border.BorderBrush>
                        <ScrollViewer x:Name="PART_ContentHost" Focusable="False"
                                      HorizontalScrollBarVisibility="Hidden"
                                      VerticalScrollBarVisibility="Hidden" />
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="border" Property="BorderBrush" Value="{StaticResource ForegroundDimBrush}" />
                        </Trigger>
                        <Trigger Property="IsKeyboardFocusWithin" Value="True">
                            <Setter TargetName="border" Property="BorderBrush" Value="{StaticResource AccentBrush}" />
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter Property="Opacity" Value="0.4" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- Dark Context Menu -->
    <Style TargetType="ContextMenu">
        <Setter Property="Background" Value="{StaticResource SurfaceBrush}" />
        <Setter Property="BorderBrush" Value="{StaticResource BorderBrush}" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="Padding" Value="2" />
        <Setter Property="HasDropShadow" Value="True" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ContextMenu">
                    <Border Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="8" Padding="{TemplateBinding Padding}">
                        <Border.Effect>
                            <DropShadowEffect BlurRadius="20" ShadowDepth="4" Color="#000000" Opacity="0.5" Direction="270" />
                        </Border.Effect>
                        <StackPanel IsItemsHost="True" KeyboardNavigation.DirectionalNavigation="Cycle" />
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="MenuItem">
        <Setter Property="Foreground" Value="{StaticResource ForegroundBrush}" />
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="Padding" Value="10,6" />
        <Setter Property="FontSize" Value="12" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="MenuItem">
                    <Border x:Name="border" Background="{TemplateBinding Background}"
                            CornerRadius="4" Padding="{TemplateBinding Padding}" Margin="2,1">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="20" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0" Text="{TemplateBinding Icon}" FontFamily="Segoe MDL2 Assets"
                                       FontSize="12" Foreground="{StaticResource ForegroundDimBrush}"
                                       VerticalAlignment="Center" />
                            <ContentPresenter Grid.Column="1" ContentSource="Header" VerticalAlignment="Center"
                                              RecognizesAccessKey="True" />
                            <TextBlock Grid.Column="2" Text="{TemplateBinding InputGestureText}"
                                       Foreground="{StaticResource ForegroundDimBrush}" FontSize="11"
                                       VerticalAlignment="Center" Margin="16,0,0,0" />
                        </Grid>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsHighlighted" Value="True">
                            <Setter TargetName="border" Property="Background" Value="#FF1A1A2E" />
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter Property="Opacity" Value="0.4" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="Separator">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Separator">
                    <Border Height="1" Background="{StaticResource BorderBrush}" Margin="6,3" />
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</ResourceDictionary>
